<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{{ title or SITE_NAME }}</title>
  <meta name="description" content="{{ meta_description or 'X‑Estetik — katalog urządzeń i technologii dla gabinetów oraz klinik.' }}">
  <link rel="icon" href="{{ url_for('static', filename='img/favicon.svg') }}">

  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/site.css') }}?v={{ STATIC_VERSION }}">
  {% block head %}{% endblock %}
</head>

<body class="bg-paper text-slate-900 antialiased {{ body_class or '' }}" data-has-hero="{{ '1' if HAS_HERO else '0' }}">
  <!-- Header -->
  <header id="siteHeader" class="site-header {% if HAS_HERO %}is-transparent{% else %}is-solid{% endif %}">
    <div class="site-header-inner">
      <a href="{{ url_for('index') }}" class="site-brand" aria-label="X-Estetik">
        <span class="site-logo" aria-hidden="true">X</span>
        <span class="site-brand-text">
          {# Avoid duplicated brand text (BRAND == SITE_NAME by default) #}
          <span class="site-brand-name">{{ SITE_NAME }}</span>
        </span>
      </a>

      <nav class="site-nav" aria-label="Główne">
        <a class="site-nav-link" href="{{ url_for('about') }}">O nas</a>
        <a class="site-nav-link" href="{{ url_for('lasers') }}">Lasery</a>
        <a class="site-nav-link" href="{{ url_for('hi_tech') }}" title="Urządzenia Hi‑Tech">Urządzenia</a>
        {% if HAS_ACCESSORIES %}
        <a class="site-nav-link" href="{{ url_for('accessories') }}">Akcesoria</a>
        {% endif %}
        <a class="site-nav-link" href="{{ url_for('gielda') }}" title="Giełda Sprzętu Kosmetycznego">Giełda</a>
        <a class="site-nav-link" href="{{ url_for('finansowanie') }}">Finansowanie</a>
        <a class="site-nav-link" href="{{ url_for('reviews') }}">Opinie</a>
        <a class="site-nav-link" href="{{ url_for('filmy') }}">Filmy</a>
        <a class="site-nav-link" href="{{ url_for('social') }}" title="Media społecznościowe">Media</a>
        <a class="site-nav-link" href="{{ url_for('strony_www_dla_gabinetow') }}">Cyfrowe wsparcie salonów</a>
        <a class="site-nav-link" href="{{ url_for('index') }}#kontakt">Kontakt</a>
      </nav>

      {# Mobile-only pill like the reference (centered). Desktop keeps the full CTA button on the right. #}
      <a href="{{ url_for('catalog_download') }}" class="site-mobile-pill" aria-label="Pobierz katalog PDF">
        Katalog PDF
      </a>

      <div class="site-actions">
        <a href="{{ url_for('catalog_download') }}" class="site-cta">
          Katalog (PDF)
        </a>

        <button id="mobileMenuBtn" class="site-burger" aria-label="Menu" aria-expanded="false">
          <span class="burger-lines" aria-hidden="true"><span></span><span></span></span>
        </button>
      </div>
    </div>
  </header>

  <main class="{% if HAS_HERO %}pt-0{% else %}pt-20{% endif %}">
    <div class="mx-auto max-w-[1180px] px-5 md:px-8">
      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          <div class="pt-6 space-y-2">
            {% for category, msg in messages %}
              <div class="rounded-2xl border px-4 py-3 text-sm
                {% if category == 'success' %} border-emerald-200 bg-emerald-50 text-emerald-900
                {% elif category == 'error' %} border-rose-200 bg-rose-50 text-rose-900
                {% else %} border-slate-200 bg-white/70 text-slate-900{% endif %}">
                {{ msg }}
              </div>
            {% endfor %}
          </div>
        {% endif %}
      {% endwith %}
    </div>

    {% block content %}{% endblock %}
  </main>

  <footer class="mt-24 border-t border-black/10 bg-white/40">
    <div class="mx-auto max-w-[1180px] px-5 md:px-8 py-14">
      <!-- Top row -->
      <div class="grid gap-10 md:grid-cols-3">
        <!-- Brand / about -->
        <div>
          <div class="flex items-center gap-3">
            <div class="h-10 w-10 rounded-2xl bg-slate-900 text-white grid place-items-center font-semibold">X</div>
            <div class="leading-tight">
              <div class="font-semibold">{{ SITE_NAME }}</div>
            </div>
          </div>
          <p class="mt-4 text-sm text-slate-600 leading-relaxed">
            Nowoczesne technologie dla gabinetów i klinik. Materiały mają charakter informacyjny.
          </p>
          <div class="mt-5">
            <a class="inline-flex items-center gap-2 text-sm underline text-slate-600 hover:text-slate-900" href="{{ url_for('catalog_download') }}">
              <span>Pobierz katalog PDF</span>
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                <polyline points="7 10 12 15 17 10"/>
                <line x1="12" y1="15" x2="12" y2="3"/>
              </svg>
            </a>
          </div>
        </div>

        <!-- Contact -->
        <div>
          <div class="font-semibold">Kontakt</div>
          <div class="mt-4 text-sm text-slate-700 space-y-2">
            {% if CONTACT_EMAIL %}
            <div>E‑mail: <a class="underline" href="mailto:{{ CONTACT_EMAIL }}">{{ CONTACT_EMAIL }}</a></div>
            {% endif %}
            {% if CONTACT_PHONE %}
            <div>Telefon: <a class="underline" href="tel:{{ CONTACT_PHONE|replace(' ', '') }}">{{ CONTACT_PHONE }}</a></div>
            {% endif %}
            {% if INSTAGRAM_HANDLE %}
            <div>Instagram: <a class="underline" href="{{ INSTAGRAM_URL }}" target="_blank" rel="noreferrer">{{ INSTAGRAM_HANDLE }}</a></div>
            {% endif %}
            {% if FACEBOOK_HANDLE %}
            <div>Facebook: <a class="underline" href="{{ FACEBOOK_URL }}" target="_blank" rel="noreferrer">{{ FACEBOOK_HANDLE }}</a></div>
            {% endif %}
            {% if CONTACT_NOTE %}
            <div class="text-slate-500">{{ CONTACT_NOTE }}</div>
            {% endif %}
          </div>

          {% if FACEBOOK_URL or INSTAGRAM_URL or WHATSAPP_URL %}
          <div class="mt-5 flex items-center gap-3">
            {% if FACEBOOK_URL %}
            <a href="{{ FACEBOOK_URL }}" target="_blank" rel="noreferrer" aria-label="Facebook"
               class="h-10 w-10 rounded-full grid place-items-center bg-[#1877F2] text-white shadow-sm ring-1 ring-black/10 transition-all hover:-translate-y-0.5 hover:shadow-md active:translate-y-0">
              <svg class="block" width="18" height="18" viewBox="0 0 320 512" fill="currentColor" aria-hidden="true">
                <path d="M279.14 288l14.22-92.66h-88.91V117.78c0-25.35 12.42-50.06 52.24-50.06H297V6.26S260.43 0 225.36 0c-73.22 0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z"/>
              </svg>
            </a>
            {% endif %}

            {% if INSTAGRAM_URL %}
            <a href="{{ INSTAGRAM_URL }}" target="_blank" rel="noreferrer" aria-label="Instagram"
               class="h-10 w-10 rounded-full grid place-items-center bg-gradient-to-tr from-[#feda75] via-[#d62976] to-[#4f5bd5] text-white shadow-sm ring-1 ring-black/10 transition-all hover:-translate-y-0.5 hover:shadow-md active:translate-y-0">
              <svg class="block" width="18" height="18" viewBox="0 0 448 512" fill="currentColor" aria-hidden="true">
                <path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"/>
              </svg>
            </a>
            {% endif %}

            {% if WHATSAPP_URL %}
            <a href="{{ WHATSAPP_URL }}" target="_blank" rel="noreferrer" aria-label="WhatsApp"
               class="h-10 w-10 rounded-full grid place-items-center bg-[#25D366] text-white shadow-sm ring-1 ring-black/10 transition-all hover:-translate-y-0.5 hover:shadow-md active:translate-y-0">
              <svg class="block" width="18" height="18" viewBox="0 0 448 512" fill="currentColor" aria-hidden="true">
                <path d="M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94.0-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7.0c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18.1-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18.1-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"/>
              </svg>
            </a>
            {% endif %}
          </div>
          {% endif %}
        </div>

        <!-- Company -->
        {% if COMPANY_NAME %}
        <div>
          <div class="text-[11px] font-semibold tracking-[0.14em] uppercase text-slate-500">Dane firmy</div>
          <div class="mt-2 text-sm text-slate-700 leading-relaxed">
            <div class="font-medium">{{ COMPANY_NAME }}</div>
            {% if COMPANY_NIP %}<div>NIP: {{ COMPANY_NIP }}</div>{% endif %}
            {% if COMPANY_ADDRESS %}<div>{{ COMPANY_ADDRESS|replace("\n", "<br>")|safe }}</div>{% endif %}
          </div>
        </div>
        {% endif %}
      </div>

      <!-- Footer extra row -->
      <div class="mt-12 pt-10 border-t border-black/10">
        <div class="font-semibold">Media społecznościowe</div>
        <p class="mt-4 text-sm text-slate-600 leading-relaxed">
          Linki oraz kody QR gotowe do druku — dostępne w zakładce „Media społecznościowe”.
        </p>
        <div class="mt-5 flex flex-wrap items-center gap-3">
          <a class="pill-link" href="{{ url_for('social') }}">Zobacz QR</a>
          <a class="pill-link" href="{{ url_for('reviews') }}">Opinie</a>
          <a class="pill-link" href="{{ url_for('finansowanie') }}">Finansowanie</a>
          <a class="pill-link" href="{{ url_for('gielda') }}">Giełda</a>
        </div>
      </div>
    </div>

    <div class="border-t border-black/10">
      <div class="mx-auto max-w-[1180px] px-5 md:px-8 py-6 flex flex-col gap-3 md:flex-row md:items-center md:justify-between text-xs text-slate-600">
        <div>© {{ CURRENT_YEAR }} {{ SITE_NAME }}. Wszelkie prawa zastrzeżone.</div>
        <div class="flex flex-wrap gap-x-4 gap-y-2">
          <a class="underline hover:text-slate-900" href="{{ url_for('policy', slug='privacy') }}">Polityka prywatności</a>
          <a class="underline hover:text-slate-900" href="{{ url_for('policy', slug='cookies') }}">Polityka cookies</a>
          <a class="underline hover:text-slate-900" href="{{ url_for('policy', slug='terms') }}">Regulamin serwisu</a>
          <a class="underline hover:text-slate-900" href="{{ url_for('policy', slug='disclaimer') }}">Zastrzeżenia</a>
        </div>
      </div>
    </div>
  </footer>

  <!-- Cookie notice (minimal, non-blocking; stores acceptance in localStorage) -->
  <div id="cookieBanner" class="fixed inset-x-0 bottom-0 z-[99999] hidden">
    <div class="mx-auto max-w-[1180px] px-5 md:px-8 pb-5">
      <div class="rounded-2xl border border-black/10 bg-white/95 backdrop-blur shadow-soft p-4 md:p-5 flex flex-col gap-3 md:flex-row md:items-center md:justify-between">
        <div class="text-xs md:text-sm text-slate-700 leading-relaxed">
          Ta strona korzysta z plików cookies niezbędnych do działania serwisu. Więcej informacji: <a class="underline" href="{{ url_for('policy', slug='cookies') }}">Polityka cookies</a>.
        </div>
        <div class="flex items-center gap-3">
          <button id="cookieAccept" class="inline-flex items-center justify-center rounded-2xl px-4 py-2 text-xs md:text-sm bg-slate-900 text-white hover:bg-slate-800">Akceptuję</button>
          <a class="inline-flex items-center justify-center rounded-2xl px-4 py-2 text-xs md:text-sm border border-black/10 hover:bg-black/5" href="{{ url_for('policy', slug='privacy') }}">Polityka prywatności</a>
        </div>
      </div>
    </div>
  </div>

  {% block scripts %}{% endblock %}

  {% block showcase_data %}
  <script>
    // Showcase videos (used on the homepage and /filmy)
    window.STATIC_VERSION = {{ STATIC_VERSION|tojson }};

    // Default showcase clips (homepage).
    // If R2 clips are configured, use them; otherwise fall back to local HERO ("video 1").
    {% set v1s = video_urls('video 1') %}
    {% set fallback_showcase = [
      {"srcs": (v1s or []), "src": (v1s[0] if v1s else ""), "title": "video 1", "desc": ""}
    ] %}
    {% set showcase = (R2_SHOWCASE if (R2_SHOWCASE and (R2_SHOWCASE|length > 0)) else fallback_showcase) %}
    window.X_SHOWCASE = {{ showcase|tojson }};
  </script>
{% endblock %}



  <!-- Mobile menu -->
  <div id="mobileMenuRoot" class="mm-root" aria-hidden="true">
    <div id="mobileMenuBackdrop" class="mm-backdrop" aria-hidden="true"></div>
    <aside id="mobileMenu" class="mm-panel" role="dialog" aria-modal="true" aria-label="Menu">
      <div class="mm-top">
        <a href="{{ url_for('index') }}" class="mm-logo" aria-label="X-Estetik">
          <span class="mm-mark" aria-hidden="true">X</span>
        </a>
        <button id="mobileMenuClose" class="mm-close" aria-label="Zamknij">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M18 6 6 18"/>
            <path d="M6 6l12 12"/>
          </svg>
        </button>
      </div>

      {% if FACEBOOK_URL or INSTAGRAM_URL or WHATSAPP_URL %}
      <div class="mm-social" aria-label="Social media">
        {% if FACEBOOK_URL %}
        <a class="mm-social-link mm-fb" href="{{ FACEBOOK_URL }}" target="_blank" rel="noreferrer" aria-label="Facebook">
          <svg class="block" width="22" height="22" viewBox="0 0 320 512" fill="currentColor" aria-hidden="true">
            <path d="M279.14 288l14.22-92.66h-88.91V117.78c0-25.35 12.42-50.06 52.24-50.06H297V6.26S260.43 0 225.36 0c-73.22 0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z"/>
          </svg>
        </a>
        {% endif %}

        {% if INSTAGRAM_URL %}
        <a class="mm-social-link mm-ig" href="{{ INSTAGRAM_URL }}" target="_blank" rel="noreferrer" aria-label="Instagram">
          <svg class="block" width="22" height="22" viewBox="0 0 448 512" fill="currentColor" aria-hidden="true">
            <path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"/>
          </svg>
        </a>
        {% endif %}

        {% if WHATSAPP_URL %}
        <a class="mm-social-link mm-wa" href="{{ WHATSAPP_URL }}" target="_blank" rel="noreferrer" aria-label="WhatsApp">
          <svg class="block" width="22" height="22" viewBox="0 0 448 512" fill="currentColor" aria-hidden="true">
            <path d="M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94.0-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7.0c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18.1-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18.1-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"/>
          </svg>
        </a>
        {% endif %}
      </div>
      {% endif %}

      <nav class="mm-nav" aria-label="Menu">
        <a class="mm-item" href="{{ url_for('about') }}">O nas</a>
        <a class="mm-item" href="{{ url_for('lasers') }}">Lasery</a>
        <a class="mm-item" href="{{ url_for('hi_tech') }}">Urządzenia Hi‑Tech</a>
        {% if HAS_ACCESSORIES %}
        <a class="mm-item" href="{{ url_for('accessories') }}">Akcesoria</a>
        {% endif %}
        <a class="mm-item" href="{{ url_for('gielda') }}">Giełda Sprzętu Kosmetycznego</a>
        <a class="mm-item" href="{{ url_for('strony_www_dla_gabinetow') }}">Cyfrowe wsparcie salonów</a>
        <a class="mm-item" href="{{ url_for('finansowanie') }}">Finansowanie</a>
        <a class="mm-item" href="{{ url_for('reviews') }}">Opinie</a>
        <a class="mm-item" href="{{ url_for('filmy') }}">Filmy</a>
        <a class="mm-item" href="{{ url_for('social') }}">Media społecznościowe</a>
        <a class="mm-item" href="{{ url_for('index') }}#kontakt">Kontakt</a>
      </nav>

      <div class="mm-bottom">
        <a class="mm-pill" href="{{ url_for('catalog_download') }}">Pobierz katalog PDF</a>
      </div>
    </aside>
  </div>

  <script src="{{ url_for('static', filename='js/site.js') }}?v={{ STATIC_VERSION }}"></script>
  <script src="{{ url_for('static', filename='js/site_extra.js') }}?v={{ STATIC_VERSION }}"></script>
</body>
</html>
