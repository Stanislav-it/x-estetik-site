<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{{ title or SITE_NAME }}</title>
  <meta name="description" content="{{ meta_description or 'X‑Estetik — katalog urządzeń i technologii dla gabinetów oraz klinik.' }}">
  <link rel="icon" href="{{ url_for('static', filename='img/favicon.svg') }}">

  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/site.css') }}?v={{ STATIC_VERSION }}">
  {% block head %}{% endblock %}
</head>

<body class="bg-paper text-slate-900 antialiased {{ body_class or '' }}" data-has-hero="{{ '1' if HAS_HERO else '0' }}">
  <!-- Header -->
  <header id="siteHeader" class="site-header {% if HAS_HERO %}is-transparent{% else %}is-solid{% endif %}">
    <div class="site-header-inner">
      <a href="{{ url_for('index') }}" class="site-brand" aria-label="X-Estetik">
        <span class="site-logo" aria-hidden="true">X</span>
        <span class="site-brand-text">
          {# Avoid duplicated brand text (BRAND == SITE_NAME by default) #}
          <span class="site-brand-name">{{ SITE_NAME }}</span>
        </span>
      </a>

      <nav class="site-nav" aria-label="Główne">
        <a class="site-nav-link" href="{{ url_for('about') }}">O nas</a>
        <a class="site-nav-link" href="{{ url_for('finansowanie') }}">Finansowanie</a>
        <a class="site-nav-link" href="{{ url_for('lasers') }}">Lasery</a>
        <a class="site-nav-link" href="{{ url_for('hi_tech') }}">Urządzenia Hi‑Tech</a>
        {% if HAS_ACCESSORIES %}
        <a class="site-nav-link" href="{{ url_for('accessories') }}">Akcesoria</a>
        {% endif %}
        <a class="site-nav-link" href="{{ url_for('reviews') }}">Opinie</a>
        <a class="site-nav-link" href="{{ url_for('filmy') }}">Filmy</a>
        <a class="site-nav-link" href="{{ url_for('social') }}">Media społecznościowe</a>
        <a class="site-nav-link" href="{{ url_for('index') }}#kontakt">Kontakt</a>
      </nav>

      {# Mobile-only pill like the reference (centered). Desktop keeps the full CTA button on the right. #}
      <a href="{{ url_for('catalog_download') }}" class="site-mobile-pill" aria-label="Pobierz katalog PDF">
        Katalog PDF
      </a>

      <div class="site-actions">
        <a href="{{ url_for('catalog_download') }}" class="site-cta">
          Pobierz katalog (PDF)
        </a>

        <button id="mobileMenuBtn" class="site-burger" aria-label="Menu" aria-expanded="false">
          <span class="burger-lines" aria-hidden="true"><span></span><span></span></span>
        </button>
      </div>
    </div>
  </header>

  <main class="{% if HAS_HERO %}pt-0{% else %}pt-20{% endif %}">
    <div class="mx-auto max-w-[1180px] px-5 md:px-8">
      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          <div class="pt-6 space-y-2">
            {% for category, msg in messages %}
              <div class="rounded-2xl border px-4 py-3 text-sm
                {% if category == 'success' %} border-emerald-200 bg-emerald-50 text-emerald-900
                {% elif category == 'error' %} border-rose-200 bg-rose-50 text-rose-900
                {% else %} border-slate-200 bg-white/70 text-slate-900{% endif %}">
                {{ msg }}
              </div>
            {% endfor %}
          </div>
        {% endif %}
      {% endwith %}
    </div>

    {% block content %}{% endblock %}
  </main>

  <footer class="mt-24 border-t border-black/10 bg-white/40">
    <div class="mx-auto max-w-[1180px] px-5 md:px-8 py-14 grid gap-10 md:grid-cols-3">
      <div>
        <div class="flex items-center gap-3">
          <div class="h-10 w-10 rounded-2xl bg-slate-900 text-white grid place-items-center font-semibold">X</div>
          <div class="leading-tight">
            <div class="font-semibold">{{ SITE_NAME }}</div>
          </div>
        </div>
        <p class="mt-4 text-sm text-slate-600 leading-relaxed">
          Nowoczesne technologie dla gabinetów i klinik. Materiały mają charakter informacyjny.
        </p>
        <div class="mt-5">
          <a class="inline-flex items-center gap-2 text-sm underline text-slate-600 hover:text-slate-900" href="{{ url_for('catalog_download') }}">
            <span>Pobierz katalog PDF</span>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
              <polyline points="7 10 12 15 17 10"/>
              <line x1="12" y1="15" x2="12" y2="3"/>
            </svg>
          </a>
        </div>
      </div>

      <div>
        <div class="font-semibold">Kontakt</div>
        <div class="mt-4 text-sm text-slate-700 space-y-2">
          {% if CONTACT_EMAIL %}
          <div>E‑mail: <a class="underline" href="mailto:{{ CONTACT_EMAIL }}">{{ CONTACT_EMAIL }}</a></div>
          {% endif %}
          {% if CONTACT_PHONE %}
          <div>Telefon/WhatsApp: <a class="underline" href="tel:{{ CONTACT_PHONE|replace(' ', '') }}">{{ CONTACT_PHONE }}</a></div>
          {% endif %}
          {% if INSTAGRAM_HANDLE %}
          <div>Instagram: <a class="underline" href="{{ INSTAGRAM_URL }}" target="_blank" rel="noreferrer">{{ INSTAGRAM_HANDLE }}</a></div>
          {% endif %}
          {% if FACEBOOK_HANDLE %}
          <div>Facebook: <a class="underline" href="{{ FACEBOOK_URL }}" target="_blank" rel="noreferrer">{{ FACEBOOK_HANDLE }}</a></div>
          {% endif %}
          {% if CONTACT_NOTE %}
          <div class="text-slate-500">{{ CONTACT_NOTE }}</div>
          {% endif %}
        </div>
      </div>

      <div>
        <div class="font-semibold">Media społecznościowe</div>
        <p class="mt-4 text-sm text-slate-600 leading-relaxed">
          Linki oraz kody QR gotowe do druku — dostępne w zakładce „Media społecznościowe”.
        </p>
        <div class="mt-5 flex items-center gap-3">
          <a class="pill-link" href="{{ url_for('social') }}">Zobacz QR</a>
          <a class="pill-link" href="{{ url_for('reviews') }}">Opinie</a>
          <a class="pill-link" href="{{ url_for('finansowanie') }}">Finansowanie</a>
        </div>
      </div>
    </div>
  </footer>

  {% block scripts %}{% endblock %}

  {% block showcase_data %}
  <script>
    // Showcase videos (used on the homepage and /filmy)
    window.STATIC_VERSION = {{ STATIC_VERSION|tojson }};

    // Default showcase clips (homepage).
    // If R2 clips are configured, use them; otherwise fall back to local HERO ("video 1").
    {% set v1s = video_urls('video 1') %}
    {% set fallback_showcase = [
      {"srcs": (v1s or []), "src": (v1s[0] if v1s else ""), "title": "video 1", "desc": ""}
    ] %}
    {% set showcase = (R2_SHOWCASE if (R2_SHOWCASE and (R2_SHOWCASE|length > 0)) else fallback_showcase) %}
    window.X_SHOWCASE = {{ showcase|tojson }};
  </script>
{% endblock %}



  <!-- Mobile menu -->
  <div id="mobileMenuRoot" class="mm-root" aria-hidden="true">
    <div id="mobileMenuBackdrop" class="mm-backdrop" aria-hidden="true"></div>
    <aside id="mobileMenu" class="mm-panel" role="dialog" aria-modal="true" aria-label="Menu">
      <div class="mm-top">
        <a href="{{ url_for('index') }}" class="mm-logo" aria-label="X-Estetik">
          <span class="mm-mark" aria-hidden="true">X</span>
        </a>
        <button id="mobileMenuClose" class="mm-close" aria-label="Zamknij">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M18 6 6 18"/>
            <path d="M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <nav class="mm-nav" aria-label="Menu">
        <a class="mm-item" href="{{ url_for('about') }}">O nas</a>
        <a class="mm-item" href="{{ url_for('finansowanie') }}">Finansowanie</a>
        <a class="mm-item" href="{{ url_for('lasers') }}">Lasery</a>
        <a class="mm-item" href="{{ url_for('hi_tech') }}">Urządzenia Hi‑Tech</a>
        {% if HAS_ACCESSORIES %}
        <a class="mm-item" href="{{ url_for('accessories') }}">Akcesoria</a>
        {% endif %}
        <a class="mm-item" href="{{ url_for('reviews') }}">Opinie</a>
        <a class="mm-item" href="{{ url_for('filmy') }}">Filmy</a>
        <a class="mm-item" href="{{ url_for('social') }}">Media społecznościowe</a>
        <a class="mm-item" href="{{ url_for('index') }}#kontakt">Kontakt</a>
      </nav>

      <div class="mm-bottom">
        <a class="mm-pill" href="{{ url_for('catalog_download') }}">Pobierz katalog PDF <span aria-hidden="true">↗</span></a>
      </div>
    </aside>
  </div>

  <script src="{{ url_for('static', filename='js/site.js') }}?v={{ STATIC_VERSION }}"></script>
  <script src="{{ url_for('static', filename='js/site_extra.js') }}?v={{ STATIC_VERSION }}"></script>
</body>
</html>
